PS C:\self_learn\6.5840\src\raft1> go test -run TestLeaderFailure3B
Test (3B): test failure of leaders (reliable network)...
Node: 2 become candidate: 0 with current term: 1
Node: 1 become candidate: 0 with current term: 1
Node: 0 become candidate: 0 with current term: 1
rf.votedFor value: 2 and args.CandidateId: 1
rf.votedFor value: 0 and args.CandidateId: 1
rf.votedFor value: 1 and args.CandidateId: 2
rf.votedFor value: 2 and args.CandidateId: 0
rf.votedFor value: 0 and args.CandidateId: 2
rf.votedFor value: 1 and args.CandidateId: 0
Node: 0 become candidate: 0 with current term: 2
rf.votedFor value: -1 and args.CandidateId: 0
Node: 2 at state: 0 become follower because of receive vote requiest from: 0
Node: 2 at state: 1 become follower and voted for node: 0
args.LastLogTerm is: 0, args.LastLogIndex: 0
rf.log[len(rf.log)-1].Term is: 0, rf.log[len(rf.log)-1].Index: 0
Term of REQUEST NODE: 2 after vote: 2 and node request vote's term: 2
rf.votedFor value: -1 and args.CandidateId: 0
Value of matchIndex and nextIndex at LEADER NODE [0 0 0] [1 1 1]
Node: 1 at state: 0 become follower because of receive vote requiest from: 0
Node: 1 at state: 1 become follower and voted for node: 0
args.LastLogTerm is: 0, args.LastLogIndex: 0
rf.log[len(rf.log)-1].Term is: 0, rf.log[len(rf.log)-1].Index: 0
Term of REQUEST NODE: 1 after vote: 2 and node request vote's term: 2
Value of matchIndex and nextIndex at LEADER NODE [0 0 0] [1 1 1]
Value of rf.commitIndex AFTER updated: 0 at leader: 0
Value of rf.commitIndex AFTER updated: 0 at leader: 0
Last log index :1 of Log of node: 1 after be appended
namnh check log follower: 1 after be appended!!!
namnh log after be appended!!!
 [{0 0 <nil>} {1 2 101}]
Follower : 1 receive leaderCommit: 0 and its commitIndex: 0
Last log index :1 of Log of node: 2 after be appended
namnh check log follower: 2 after be appended!!!
namnh log after be appended!!!
 [{0 0 <nil>} {1 2 101}]
Follower : 2 receive leaderCommit: 0 and its commitIndex: 0
Value of rf.commitIndex AFTER updated: 1 at leader: 0
Namnh UpdateStateMachineLog Node: 0 is :2 state
namnh check rf.commitIndex: 1 and rf.lastApplied before applied: 0!!!
Value of rf.commitIndex AFTER updated: 1 at leader: 0
Value of matchIndex and nextIndex at LEADER NODE [1 1 1] [2 2 2]
Value of matchIndex and nextIndex at LEADER NODE [1 1 1] [2 2 2]
Follower : 2 receive leaderCommit: 1 > its commitIndex: 0. Its lastApplied: 0
Value of rf.commitIndex AFTER updated: 1 at leader: 2 1!!!
Follower : 1 receive leaderCommit: 1 > its commitIndex: 0. Its lastApplied: 0
Value of rf.commitIndex AFTER updated: 1 at leader: 1 1!!!
Value of rf.commitIndex AFTER updated: 1 at leader: 0
Value of rf.commitIndex AFTER updated: 1 at leader: 0
Namnh UpdateStateMachineLog Node: 1 is :1 state
namnh check rf.commitIndex: 1 and rf.lastApplied before applied: 0!!!
Namnh UpdateStateMachineLog Node: 2 is :1 state
namnh check rf.commitIndex: 1 and rf.lastApplied before applied: 0!!!
Value of matchIndex and nextIndex at LEADER NODE [1 1 1] [2 2 2]
Value of matchIndex and nextIndex at LEADER NODE [1 1 1] [2 2 2]
Value of rf.commitIndex AFTER updated: 1 at leader: 0
Value of rf.commitIndex AFTER updated: 1 at leader: 0
Value of matchIndex and nextIndex at LEADER NODE [1 1 1] [2 2 2]
Value of matchIndex and nextIndex at LEADER NODE [1 1 1] [2 2 2]
Value of rf.commitIndex AFTER updated: 1 at leader: 0
Value of rf.commitIndex AFTER updated: 1 at leader: 0
Node: 0 become candidate: 0 with current term: 3
rf.votedFor value: -1 and args.CandidateId: 0
Node: 1 at state: 1 become follower because of receive vote requiest from: 0
Node: 1 at state: 1 become follower and voted for node: 0
args.LastLogTerm is: 2, args.LastLogIndex: 1
rf.log[len(rf.log)-1].Term is: 2, rf.log[len(rf.log)-1].Index: 1
Term of REQUEST NODE: 1 after vote: 3 and node request vote's term: 3
rf.votedFor value: -1 and args.CandidateId: 0
Node: 2 at state: 1 become follower because of receive vote requiest from: 0
Node: 2 at state: 1 become follower and voted for node: 0
args.LastLogTerm is: 2, args.LastLogIndex: 1
rf.log[len(rf.log)-1].Term is: 2, rf.log[len(rf.log)-1].Index: 1
Term of REQUEST NODE: 2 after vote: 3 and node request vote's term: 3
Value of matchIndex and nextIndex at LEADER NODE [1 0 0] [2 2 2]
Value of matchIndex and nextIndex at LEADER NODE [1 0 0] [2 2 2]
Value of rf.commitIndex AFTER updated: 1 at leader: 0
Value of rf.commitIndex AFTER updated: 1 at leader: 0
Value of matchIndex and nextIndex at LEADER NODE [1 1 1] [2 2 2]
Value of matchIndex and nextIndex at LEADER NODE [1 1 1] [2 2 2]
Value of rf.commitIndex AFTER updated: 1 at leader: 0
Value of rf.commitIndex AFTER updated: 1 at leader: 0
Value of matchIndex and nextIndex at LEADER NODE [1 1 1] [2 2 2]
Value of matchIndex and nextIndex at LEADER NODE [1 1 1] [2 2 2]
Value of matchIndex and nextIndex at LEADER NODE [1 1 1] [2 2 2]
Value of matchIndex and nextIndex at LEADER NODE [1 1 1] [2 2 2]
Node: 0 become candidate: 0 with current term: 4
Node: 2 become candidate: 0 with current term: 4
Node: 1 become candidate: 0 with current term: 4
rf.votedFor value: 1 and args.CandidateId: 2
rf.votedFor value: 2 and args.CandidateId: 1
Node: 0 become candidate: 0 with current term: 5
Node: 1 become candidate: 0 with current term: 5
Node: 2 become candidate: 0 with current term: 5
rf.votedFor value: 2 and args.CandidateId: 1
rf.votedFor value: 1 and args.CandidateId: 2
Node: 0 become candidate: 0 with current term: 6
Node: 1 become candidate: 0 with current term: 6
Node: 2 become candidate: 0 with current term: 6
rf.votedFor value: 2 and args.CandidateId: 1
rf.votedFor value: 1 and args.CandidateId: 2
Node: 0 become candidate: 0 with current term: 7
Node: 1 become candidate: 0 with current term: 7
Node: 2 become candidate: 0 with current term: 7
rf.votedFor value: 2 and args.CandidateId: 1
rf.votedFor value: 1 and args.CandidateId: 2
Node: 0 become candidate: 0 with current term: 8
Node: 1 become candidate: 0 with current term: 8
Node: 2 become candidate: 0 with current term: 8
rf.votedFor value: 2 and args.CandidateId: 1
rf.votedFor value: 1 and args.CandidateId: 2
Node: 0 become candidate: 0 with current term: 9
Node: 2 become candidate: 0 with current term: 9
Node: 1 become candidate: 0 with current term: 9
rf.votedFor value: 1 and args.CandidateId: 2
rf.votedFor value: 2 and args.CandidateId: 1
Node: 0 become candidate: 0 with current term: 10
Node: 1 become candidate: 0 with current term: 10
Node: 2 become candidate: 0 with current term: 10
rf.votedFor value: 2 and args.CandidateId: 1
rf.votedFor value: 1 and args.CandidateId: 2
Node: 0 become candidate: 0 with current term: 11
Node: 1 become candidate: 0 with current term: 11
Node: 2 become candidate: 0 with current term: 11
rf.votedFor value: 2 and args.CandidateId: 1
rf.votedFor value: 1 and args.CandidateId: 2
Node: 0 become candidate: 0 with current term: 12
Node: 2 become candidate: 0 with current term: 12
Node: 1 become candidate: 0 with current term: 12
rf.votedFor value: 1 and args.CandidateId: 2
rf.votedFor value: 2 and args.CandidateId: 1
Node: 0 become candidate: 0 with current term: 13
Node: 2 become candidate: 0 with current term: 13
Node: 1 become candidate: 0 with current term: 13
rf.votedFor value: 1 and args.CandidateId: 2
rf.votedFor value: 2 and args.CandidateId: 1
Node: 0 become candidate: 0 with current term: 14
Node: 2 become candidate: 0 with current term: 14
Node: 1 become candidate: 0 with current term: 14
rf.votedFor value: 1 and args.CandidateId: 2
rf.votedFor value: 2 and args.CandidateId: 1
Node: 0 become candidate: 0 with current term: 15
Node: 2 become candidate: 0 with current term: 15
Node: 1 become candidate: 0 with current term: 15
rf.votedFor value: 1 and args.CandidateId: 2
rf.votedFor value: 2 and args.CandidateId: 1
Node: 0 become candidate: 0 with current term: 16
Node: 1 become candidate: 0 with current term: 16
Node: 2 become candidate: 0 with current term: 16
rf.votedFor value: 2 and args.CandidateId: 1
rf.votedFor value: 1 and args.CandidateId: 2
Node: 0 become candidate: 0 with current term: 17
Node: 1 become candidate: 0 with current term: 17
Node: 2 become candidate: 0 with current term: 17
rf.votedFor value: 2 and args.CandidateId: 1
rf.votedFor value: 1 and args.CandidateId: 2
Node: 0 become candidate: 0 with current term: 18
Node: 2 become candidate: 0 with current term: 18
Node: 1 become candidate: 0 with current term: 18
rf.votedFor value: 1 and args.CandidateId: 2
rf.votedFor value: 2 and args.CandidateId: 1
Node: 0 become candidate: 0 with current term: 19
Node: 1 become candidate: 0 with current term: 19
Node: 2 become candidate: 0 with current term: 19
rf.votedFor value: 2 and args.CandidateId: 1
rf.votedFor value: 1 and args.CandidateId: 2
Node: 0 become candidate: 0 with current term: 20
Node: 1 become candidate: 0 with current term: 20
Node: 2 become candidate: 0 with current term: 20
rf.votedFor value: 1 and args.CandidateId: 2
rf.votedFor value: 2 and args.CandidateId: 1
Node: 0 become candidate: 0 with current term: 21
Node: 1 become candidate: 0 with current term: 21
Node: 2 become candidate: 0 with current term: 21
rf.votedFor value: 2 and args.CandidateId: 1
rf.votedFor value: 1 and args.CandidateId: 2
Node: 0 become candidate: 0 with current term: 22
Node: 1 become candidate: 0 with current term: 22
Node: 2 become candidate: 0 with current term: 22
rf.votedFor value: 2 and args.CandidateId: 1
rf.votedFor value: 1 and args.CandidateId: 2
Node: 0 become candidate: 0 with current term: 23
Node: 1 become candidate: 0 with current term: 23
Node: 2 become candidate: 0 with current term: 23
rf.votedFor value: 1 and args.CandidateId: 2
rf.votedFor value: 2 and args.CandidateId: 1
Node: 0 become candidate: 0 with current term: 24
Node: 2 become candidate: 0 with current term: 24
Node: 1 become candidate: 0 with current term: 24
rf.votedFor value: 1 and args.CandidateId: 2
rf.votedFor value: 2 and args.CandidateId: 1
Node: 0 become candidate: 0 with current term: 25
Node: 1 become candidate: 0 with current term: 25
Node: 2 become candidate: 0 with current term: 25
rf.votedFor value: 2 and args.CandidateId: 1
rf.votedFor value: 1 and args.CandidateId: 2
Node: 0 become candidate: 0 with current term: 26
Node: 1 become candidate: 0 with current term: 26
Node: 2 become candidate: 0 with current term: 26
rf.votedFor value: 2 and args.CandidateId: 1
rf.votedFor value: 1 and args.CandidateId: 2
Node: 0 become candidate: 0 with current term: 27
namnh check that ts.checkFinished() = false
Fatal: one(102) failed to reach agreement
        C:/self_learn/6.5840/src/raft1/test.go:287
        C:/self_learn/6.5840/src/raft1/raft_test.go:250
info: wrote visualization to C:\Users\namnh2\AppData\Local\Temp\porcupine-2075231996.html
--- FAIL: TestLeaderFailure3B (11.53s)
FAIL
exit status 1
FAIL    6.5840/raft1    11.721s